<div class="admin-container">
	<header class="admin-header">
		<h1>Admin Panel</h1>
		<div class="actions">
			<button class="refresh" (click)="loadUsers()">Refresh Users</button>
			<button class="refresh" (click)="loadPosts()">Refresh Posts</button>
		</div>
	</header>

	<div *ngIf="errorMessage" class="notification error">{{ errorMessage }}</div>

	<main class="admin-content">
		<section class="card">
			<div class="card-header">
				<h2>All Users</h2>
				<span class="count">{{ users?.length || 0 }}</span>
			</div>
			<div class="table-wrapper" *ngIf="users && users.length; else noUsers">
				<table class="table">
					<thead>
						<tr>
							<th>ID</th>
							<th>Username</th>
							<th>Email</th>
										<th>Role</th>
										<th>Age</th>
										<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let u of users">
							<td>{{ u.id }}</td>
							<td>{{ u.username }}</td>
							<td>{{ u.mail }}</td>
										<td>{{ u.role }}</td>
										<td>{{ u.age }}</td>
										<td>
											<button class="danger-btn" (click)="deleteUser(u.id)">Delete</button>
										</td>
						</tr>
					</tbody>
				</table>
			</div>
			<ng-template #noUsers>
				<div class="empty">No users found.</div>
			</ng-template>
		</section>

		<section class="card">
			<div class="card-header">
				<h2>Reports</h2>
				<span class="count">{{ reports?.length || 0 }}</span>
			</div>
			<div class="table-wrapper" *ngIf="reports && reports.length; else noReports">
				<table class="table">
					<thead>
						<tr>
							<th>ID</th>
							<th>Reporter</th>
							<th>Target User</th>
							<th>Target Post</th>
							<th>Reason</th>
							<th>Created</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let r of reports">
							<td>{{ r.id }}</td>
							<td>{{ r.reporterId }}</td>
							<td>{{ r.targetUserId || '-' }}</td>
							<td>{{ r.targetPostId || '-' }}</td>
							<td>{{ r.reason }}</td>
							<td>{{ r.createdAt | date:'short' }}</td>
							<td>
								<button class="resolve-btn" (click)="resolveReport(r.id)">Resolve</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<ng-template #noReports>
				<div class="empty">No reports found.</div>
			</ng-template>
		</section>

		<section class="card">
			<div class="card-header">
				<h2>All Posts</h2>
				<span class="count">{{ posts?.length || 0 }}</span>
			</div>
			<div class="table-wrapper" *ngIf="posts && posts.length; else noPosts">
				<table class="table">
					<thead>
						<tr>
							<th>ID</th>
							<th>Title</th>
							<th>Author</th>
										<th>Excerpt</th>
										<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let p of posts">
							<td>{{ p.id }}</td>
							<td>{{ p.title }}</td>
							<td>{{ p.author }}</td>
										<td>{{ (p.text || '').slice(0, 80) }}{{ (p.text?.length || 0) > 80 ? 'â€¦' : '' }}</td>
										<td>
											<button class="danger-btn" (click)="deletePost(p.id)">Delete</button>
										</td>
						</tr>
					</tbody>
				</table>
			</div>
			<ng-template #noPosts>
				<div class="empty">No posts found.</div>
			</ng-template>
		</section>
	</main>
</div>
